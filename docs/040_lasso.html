<!DOCTYPE html>
<html>
<head>
    <title>Lasso -- jp_doodle demo</title>
    <link rel="icon" type="image/png" href="images/clock.png">
    <link rel=stylesheet href="static/style.css">

    <link rel="stylesheet" href="jquery-ui-1.12.1/jquery-ui.css">
    <script src="jquery-ui-1.12.1/external/jquery/jquery.js"></script>
    <script src="jquery-ui-1.12.1/jquery-ui.js"></script>

    <link rel="stylesheet" href="codemirrorjs/codemirror.css">
    <script src="codemirrorjs/codemirror.js"></script>
    <script src="codemirrorjs/matchbrackets.js"></script>
    <script src="codemirrorjs/continuecomment.js"></script>
    <script src="codemirrorjs/comment.js"></script>
    <script src="codemirrorjs/javascript.js"></script>
    <style type="text/css">.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
    <script src="jp_doodle_js/canvas_2d_widget_helper.js"></script>
    <script src="jp_doodle_js/dual_canvas_helper.js"></script>
    <script src="jp_doodle_js/rectangle_collection.js"></script>
    <script src="jp_doodle_js/array_explorer.js"></script>
    <script src="jp_doodle_js/canvas_2d_vector_field.js"></script>
    <script src="jp_doodle_js/nd_frame.js"></script>
    <script src="jp_doodle_js/nd_scatter.js"></script>
    <script src="jp_doodle_js/gd_graph.js"></script>
    <script src="jp_doodle_js/directed_network.js"></script>

    <script>
        $( function() {
          $( "#discussion" ).accordion({collapsible : true, active : 'none'});
          $( "#code_text" ).accordion({collapsible : true, active : 'none'});
        } );
    </script>
</head>

<body>
<div class="top_menu">
<div style="display: grid; margin: 10px; grid-template-columns:  125px 125px 125px 125px 125px 125px 125px 125px 125px 125px">
<div><a href="index.html"><div> Drawing </div><div> <img src="images/drawing.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="010_events.html"><div> Events </div><div> <img src="images/events.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="020_bindings.html"><div> Bindings </div><div> <img src="images/bindings.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="030_animation.html"><div> Animation </div><div> <img src="images/clock.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="040_lasso.html"><div> Lasso </div><div> <img src="images/lasso.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="050_rectangles.html"><div> Rectangles </div><div> <img src="images/rectangle.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="060_chart.html"><div> Chart </div><div> <img src="images/chart.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="070_images.html"><div> Images </div><div> <img src="images/Images.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="080_transitions.html"><div> Transitions </div><div> <img src="images/Transitions.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="085_assemblies.html"><div> Assemblies </div><div> <img src="images/assemblies.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="090_frames.html"><div> Frames </div><div> <img src="images/Frame.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="095_nd_frames.html"><div> N-Dimensional Frames </div><div> <img src="images/nd_frame.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="110_nd_scatter.html"><div> N-Dimensional Scatter Plot </div><div> <img src="images/nd_scatter.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="120_network.html"><div> Network Explorer </div><div> <img src="images/network.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="array_explorer.html"><div> Array explorer </div><div> <img src="images/ArrayChooser.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="color_chooser.html"><div> Color chooser </div><div> <img src="images/color_chooser.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="opacity.html"><div> Opacity Sliders </div><div> <img src="images/opacity.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="polygon.html"><div> Edit polygon </div><div> <img src="images/edit_poly.png" style="background-color:#cdf" width="50px"/> </div></a></div>
<div><a href="vector_field.html"><div> Vector Field </div><div> <img src="images/vector_field.png" style="background-color:#cdf" width="50px"/> </div></a></div>
</div>
</div>

<p><em>
    This is an example page for the 
    <code><a href="https://github.com/AaronWatters/jp_doodle">jp_doodle</a></em></code>
    package. <br>

    <p><b><code><a href="https://github.com/AaronWatters/jp_doodle">jp_doodle</a></em></code>
        makes implementing special purpose interactive visualizations easy.</b></p>

    These example pages use stand alone Javascript, but the code used to implement them
    can be transliterated to Python and implemented using Jupyter widgets (modulo some subtleties). <br>

    Please see the Jupyter notebooks in the package for additional
    discussion and documentation. <br>

    Please use 
    <a href="https://mybinder.org/v2/gh/AaronWatters/jp_doodle/master">Binder</a>
    to easily run the Jupyter notebooks of the package.
</em></p>

<h1>Lasso</h1>
<div>
    <p>
Dual canvasses provide a lasso feature which
allows the user to select a group of named elements
by encircling them with a polygonal "lasso".
</p>
<p>
In this figure the user may mouse down to draw a
polygon and mouse up to close the polygon.
Selected circles in the lassoed area will turn
from green to pink.
</p>
</div>

<div id="target_container">
    <div id="target_div"/>
</div>

<script>
    var element = $('#target_div');
    //$('<img src="http://sipi.usc.edu/database/preview/misc/4.2.03.png">').appendTo(element);
    // configure the canvas
var config = {
    width: 400,
    height: 400,
    y_up: true,
}
element.dual_canvas_helper(config);

var make_circles = function() {
    for (var i=20; i<400; i+=20) {
        for (var j=20; j<400; j+=20) {
            element.circle({name: ""+i+":"+j, x:i, y:j, r:4, color:"green"});
        }
    }
};

var lasso_callback = function(names_mapping) {
    // change lassoed elements to pink
    for (var name in names_mapping) {
        element.change(name, {color: "pink"});
    }
};

// Provide a name for the lasso polygon for reference.
var lasso_name = "my_lasso_polygon"

var reset_lasso = function () {
    // delete the lasso polygon if it exists
    element.forget_objects([lasso_name]);
    // make or replace the circles.
    make_circles();
    // Don't delete the lasso polygon automatically so we can admire it for a while.
    var delete_it=false;
    element.do_lasso(lasso_callback, {name: lasso_name}, delete_it);
};

// set up the lasso the first time.
reset_lasso();

$("<div>Please lasso some circles once to turn them pink.</div>").appendTo(element);

var reset_button = $("<button>Reset</button>").appendTo(element);

reset_button.click(reset_lasso);
</script>

<div id="code_text">
        <h3>Code</h3>
    
        <div><textarea id="code" name="code">
var element = $('#target_div');
// configure the canvas
var config = {
    width: 400,
    height: 400,
    y_up: true,
}
element.dual_canvas_helper(config);

var make_circles = function() {
    for (var i=20; i<400; i+=20) {
        for (var j=20; j<400; j+=20) {
            element.circle({name: ""+i+":"+j, x:i, y:j, r:4, color:"green"});
        }
    }
};

var lasso_callback = function(names_mapping) {
    // change lassoed elements to pink
    for (var name in names_mapping) {
        element.change(name, {color: "pink"});
    }
};

// Provide a name for the lasso polygon for reference.
var lasso_name = "my_lasso_polygon"

var reset_lasso = function () {
    // delete the lasso polygon if it exists
    element.forget_objects([lasso_name]);
    // make or replace the circles.
    make_circles();
    // Don't delete the lasso polygon automatically so we can admire it for a while.
    var delete_it=false;
    element.do_lasso(lasso_callback, {name: lasso_name}, delete_it);
};

// set up the lasso the first time.
reset_lasso();

$("<div>Please lasso some circles once to turn them pink.</div>").appendTo(element);

var reset_button = $("<button>Reset</button>").appendTo(element);

reset_button.click(reset_lasso);
        </textarea></div>
    
    </div>

<div id="discussion">
        <h3>Discussion</h3>
    
        <div>
            <P>
To surround some of the circles with a lasso selection polygon
hold the mouse down in the figure and move the mouse around the
circles of the selection.  Release the mouse to close the polygon
and trigger the lasso selection action.
</P>
<p>
When the lasso selection fires the callback function receives a
mapping of selected object names to object properties.  Objects that
have not been named will not be selected by the lasso.
</p>
<p>
Click the reset button to change all the circles back to green and
set up another lasso interaction.
</p>
        </div>
    
    </div>
    
    <script>
            var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
              lineNumbers: true,
              matchBrackets: true,
              continueComments: "Enter",
              extraKeys: {"Ctrl-Q": "toggleComment"}
            });
     </script>
            
</body>
</html>