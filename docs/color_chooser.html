<!DOCTYPE html>
<html>
<head>
    <title>Color chooser -- jp_doodle demo</title>
    <link rel="icon" type="image/png" href="images/clock.png">
    <link rel=stylesheet href="static/style.css">

    <link rel="stylesheet" href="jquery-ui-1.12.1/jquery-ui.css">
    <script src="jquery-ui-1.12.1/external/jquery/jquery.js"></script>
    <script src="jquery-ui-1.12.1/jquery-ui.js"></script>

    <link rel="stylesheet" href="codemirrorjs/codemirror.css">
    <script src="codemirrorjs/codemirror.js"></script>
    <script src="codemirrorjs/matchbrackets.js"></script>
    <script src="codemirrorjs/continuecomment.js"></script>
    <script src="codemirrorjs/comment.js"></script>
    <script src="codemirrorjs/javascript.js"></script>
    <style type="text/css">.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
    <script src="jp_doodle_js/canvas_2d_widget_helper.js"></script>
    <script src="jp_doodle_js/dual_canvas_helper.js"></script>
    <script src="jp_doodle_js/rectangle_collection.js"></script>
    <script src="jp_doodle_js/array_explorer.js"></script>
    <script src="jp_doodle_js/canvas_2d_vector_field.js"></script>
    <script src="jp_doodle_js/nd_frame.js"></script>

    <script>
        $( function() {
          $( "#discussion" ).accordion({collapsible : true, active : 'none'});
          $( "#code_text" ).accordion({collapsible : true, active : 'none'});
        } );
    </script>
</head>

<body>
<div class="top_menu">
<div>
<span style="display: inline-block; margin: 10px;"><a href="index.html"><div> Drawing </div><div> <img src="images/drawing.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="010_events.html"><div> Events </div><div> <img src="images/events.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="020_bindings.html"><div> Bindings </div><div> <img src="images/bindings.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="030_animation.html"><div> Animation </div><div> <img src="images/clock.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="040_lasso.html"><div> Lasso </div><div> <img src="images/lasso.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="050_rectangles.html"><div> Rectangles </div><div> <img src="images/rectangle.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="060_chart.html"><div> Chart </div><div> <img src="images/chart.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="070_images.html"><div> Images </div><div> <img src="images/Images.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="080_transitions.html"><div> Transitions </div><div> <img src="images/Transitions.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="090_frames.html"><div> Frames </div><div> <img src="images/Frame.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="095_nd_frames.html"><div> Multidimensional Frames </div><div> <img src="images/nd_frame.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="array_explorer.html"><div> Array explorer </div><div> <img src="images/ArrayChooser.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="color_chooser.html"><div> Color chooser </div><div> <img src="images/color_chooser.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="opacity.html"><div> Opacity Sliders </div><div> <img src="images/opacity.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="polygon.html"><div> Edit polygon </div><div> <img src="images/edit_poly.png" style="background-color:#cdf" width="50px"/> </div></a></span>
<span style="display: inline-block; margin: 10px;"><a href="vector_field.html"><div> Vector Field </div><div> <img src="images/vector_field.png" style="background-color:#cdf" width="50px"/> </div></a></span>
</div>
</div>

<p><em>
    This is an example page for the 
    <code><a href="https://github.com/AaronWatters/jp_doodle">jp_doodle</a></em></code>
    package. <br>

    <p><b><code><a href="https://github.com/AaronWatters/jp_doodle">jp_doodle</a></em></code>
        makes implementing special purpose interactive visualizations easy.</b></p>

    Please see the Jupyter notebooks in the package for additional
    discussion and documentation. <br>

    Please use 
    <a href="https://mybinder.org/v2/gh/AaronWatters/jp_doodle/master">Binder</a>
    to easily run the Jupyter notebooks of the package.
</em></p>

<h1>Color chooser</h1>
<div>
    A color chooser.  Choose a color and then click an object to apply the color.
</div>

<div id="target_container">
    <div id="target_div"/>
</div>

<script>
    var element = $('#target_div');
    //$('<img src="http://sipi.usc.edu/database/preview/misc/4.2.03.png">').appendTo(element);
    // Attach a dual canvas associated with the element as a child of the element
// configured with width 400 and height 200.
var config = {
            width: 700,
            height: 350,
        };
element.dual_canvas_helper(config);

// Draw some named elements on the canvas.
// A filled yellow circle (disk) named "Colonel Mustard
element.circle({name: "Colonel Mustard", x:100, y:150, r:90, color:"yellow"});

// A filled red rectangle named "Miss Scarlett"
element.rect({name: "Miss Scarlett", x:100, y:130, w:100, h:20, color: "red"});

// An unfilled white circle named "Mrs. White"
element.circle({
    name: "Mrs. White", x:100, y:150, r:58, fill:false, 
    color:"white", lineWidth: 14});
    
// An unfilled blue rectangle named Mrs. Peacock
element.rect({
    name: "Mrs. Peacock", x:40, y:110, w:100, h:20,
    color: "blue", lineWidth: 10, degrees:70, fill:false});

// A line segment named "Professor Plum".
element.line({
    name: "Professor Plum", x1:190, y1:100, x2:10, y2:200,
    color:"purple", lineWidth: 20})
    
// A brown filled polygon (triangle) named Micky
element.polygon({
    name: "Micky",
    points: [[210, 10], [210, 110], [290, 60]],
    color: "brown",
})

// A green polyline named Mr. Green
element.polygon({
    name: "Mr. Green", fill:false, close:false, color: "green",
    lineWidth: 14, points: [[210, 10], [210, 110], [290, 60]]
})

// A magenta text string display named Pluto
element.text({
    name: "Pluto", text: "The Republic", font: "20px Arial",
    x: 20, y:20, degrees: 5, color:"magenta"
})

// Position a color chooser on the canvas.
var chosen_color = null;

element.color_chooser({
    x: 310, y: 50, side:200, font: "normal 7px Arial",
    callback: function(color_array, color_string) { chosen_color = color_string; }
});

// mouse tracker circle (initially hidden)
var tracker = element.circle({
    name:"mouse_track", r:5,
    events: false,  // This object is invisible to events.
    x:0, y:0, color:"black", hide:true});
    
element.text({
    x:10, y:-10, name: "explanation",
    text: "Choose a color then click an object to change its color",
})

// Center and scale the figure to fit in the available area.
element.fit(null, 20)

var on_mouse_move = function(event) {
    var name = event.canvas_name;
    var location = element.event_model_location(event);
    if ((chosen_color) && (name) && (location.x < 310)) {
        tracker.change(
            {hide:false, x:location.x, y:location.y, color:chosen_color});
        // on click change the color of the named object
        if (event.type == "click") {
            element.transition(name, {color: chosen_color});
        }
    } else {
        tracker.change({hide: true});
    }
};
element.on_canvas_event("mousemove", on_mouse_move);
element.on_canvas_event("click", on_mouse_move);
</script>

<div id="code_text">
        <h3>Code</h3>
    
        <div><textarea id="code" name="code">
var element = $('#target_div');
// Attach a dual canvas associated with the element as a child of the element
// configured with width 400 and height 200.
var config = {
            width: 700,
            height: 350,
        };
element.dual_canvas_helper(config);

// Draw some named elements on the canvas.
// A filled yellow circle (disk) named "Colonel Mustard
element.circle({name: "Colonel Mustard", x:100, y:150, r:90, color:"yellow"});

// A filled red rectangle named "Miss Scarlett"
element.rect({name: "Miss Scarlett", x:100, y:130, w:100, h:20, color: "red"});

// An unfilled white circle named "Mrs. White"
element.circle({
    name: "Mrs. White", x:100, y:150, r:58, fill:false, 
    color:"white", lineWidth: 14});
    
// An unfilled blue rectangle named Mrs. Peacock
element.rect({
    name: "Mrs. Peacock", x:40, y:110, w:100, h:20,
    color: "blue", lineWidth: 10, degrees:70, fill:false});

// A line segment named "Professor Plum".
element.line({
    name: "Professor Plum", x1:190, y1:100, x2:10, y2:200,
    color:"purple", lineWidth: 20})
    
// A brown filled polygon (triangle) named Micky
element.polygon({
    name: "Micky",
    points: [[210, 10], [210, 110], [290, 60]],
    color: "brown",
})

// A green polyline named Mr. Green
element.polygon({
    name: "Mr. Green", fill:false, close:false, color: "green",
    lineWidth: 14, points: [[210, 10], [210, 110], [290, 60]]
})

// A magenta text string display named Pluto
element.text({
    name: "Pluto", text: "The Republic", font: "20px Arial",
    x: 20, y:20, degrees: 5, color:"magenta"
})

// Position a color chooser on the canvas.
var chosen_color = null;

element.color_chooser({
    x: 310, y: 50, side:200, font: "normal 7px Arial",
    callback: function(color_array, color_string) { chosen_color = color_string; }
});

// mouse tracker circle (initially hidden)
var tracker = element.circle({
    name:"mouse_track", r:5,
    events: false,  // This object is invisible to events.
    x:0, y:0, color:"black", hide:true});
    
element.text({
    x:10, y:-10, name: "explanation",
    text: "Choose a color then click an object to change its color",
})

// Center and scale the figure to fit in the available area.
element.fit(null, 20)

var on_mouse_move = function(event) {
    var name = event.canvas_name;
    var location = element.event_model_location(event);
    if ((chosen_color) && (name) && (location.x < 310)) {
        tracker.change(
            {hide:false, x:location.x, y:location.y, color:chosen_color});
        // on click change the color of the named object
        if (event.type == "click") {
            element.transition(name, {color: chosen_color});
        }
    } else {
        tracker.change({hide: true});
    }
};
element.on_canvas_event("mousemove", on_mouse_move);
element.on_canvas_event("click", on_mouse_move);
        </textarea></div>
    
    </div>

<div id="discussion">
        <h3>Discussion</h3>
    
        <div>
            The color chooser is built in to dual canvases
via the <code>color_chooser</code> method.  The chooser
implementation illustrates the use of multiple references frames
in combination with mouse events.
        </div>
    
    </div>
    
    <script>
            var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
              lineNumbers: true,
              matchBrackets: true,
              continueComments: "Enter",
              extraKeys: {"Ctrl-Q": "toggleComment"}
            });
     </script>
            
</body>
</html>