<!DOCTYPE html>
<html>
<head>
    <title>Transitions -- jp_doodle demo</title>
    <link rel="icon" type="image/png" href="images/clock.png">
    <link rel=stylesheet href="static/style.css">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="codemirrorjs/codemirror.css">
    <script src="codemirrorjs/codemirror.js"></script>
    <script src="codemirrorjs/matchbrackets.js"></script>
    <script src="codemirrorjs/continuecomment.js"></script>
    <script src="codemirrorjs/comment.js"></script>
    <script src="codemirrorjs/javascript.js"></script>
    <style type="text/css">.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
    <script src="jp_doodle_js/canvas_2d_widget_helper.js"></script>
    <script src="jp_doodle_js/dual_canvas_helper.js"></script>
    <script src="jp_doodle_js/rectangle_collection.js"></script>
    <script src="jp_doodle_js/array_explorer.js"></script>

    <script>
        $( function() {
          $( "#discussion" ).accordion({collapsible : true, active : 'none'});
          $( "#code_text" ).accordion({collapsible : true, active : 'none'});
        } );
    </script>
</head>

<body>
<div class="top_menu">
<ul>
<li><a href="index.html">Drawing <br><img src="images/drawing.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="010_events.html">Events <br><img src="images/events.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="020_bindings.html">Bindings <br><img src="images/bindings.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="030_animation.html">Animation <br><img src="images/clock.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="040_lasso.html">Lasso <br><img src="images/lasso.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="050_rectangles.html">Rectangles <br><img src="images/rectangle.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="060_chart.html">Chart <br><img src="images/chart.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="070_images.html">Images <br><img src="images/Images.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="080_transitions.html">Transitions <br><img src="images/Transitions.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="090_frames.html">Frames <br><img src="images/Frame.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="array_explorer.html">Array explorer <br><img src="images/ArrayChooser.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="color_chooser.html">Color chooser <br><img src="images/color_chooser.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="polygon.html">Edit polygon <br><img src="images/edit_poly.png" style="background-color:#cdf" width="50px"></a></li>
<li><a href="spiders.html">Spiders <br><img src="images/spider_transparent_background.png" style="background-color:#cdf" width="50px"></a></li>
</ul>
</div>

<p><em>
    This is an example page for the 
    <code><a href="https://github.com/AaronWatters/jp_doodle">jp_doodle</a></em></code>
    package. <br>

    <p><b><code><a href="https://github.com/AaronWatters/jp_doodle">jp_doodle</a></em></code>
        makes implementing special purpose interactive visualizations easy.</b></p>

    Please see the Jupyter notebooks in the package for additional
    discussion and documentation. <br>

    Please use 
    <a href="https://mybinder.org/v2/gh/AaronWatters/jp_doodle/master">Binder</a>
    to easily run the Jupyter notebooks of the package.
</em></p>

<h1>Transitions</h1>
<div>
    You can change named objects on canvases using smooth transitions 
which interpolate between one group of attribute values and another smoothly over a time period.
</div>

<div id="target_container">
    <div id="target_div"/>
</div>

<script>
    var element = $('#target_div');
    //$('<img src="http://sipi.usc.edu/database/preview/misc/4.2.03.png">').appendTo(element);
    // Attach a dual canvas associated with the element as a child of the element
// configured with width 400 and height 400.
var config = {
            width: 400,
            height: 400,
        };
element.dual_canvas_helper(config);


var small_radius = 10;
var big_radius = 20;
var offset = 50;
var selected_color = "magenta";
var normal_color = "cyan";
var selected_text = "yellow";
var normal_text = "blue";
var duration = 3;
var text_duration = 5;
var n_circles = 10;
var theta = 2 * Math.PI / n_circles;

var texts = {};
var circles = {};

// Draw a circle of numbered circles
var draw = function() {
    for (var i=0; i<n_circles; i++) {
        var name = ""+i;
        var cx = offset * Math.cos(theta * i);
        var cy = offset * Math.sin(theta * i);
        circles[name] = element.circle({name: true, 
            x:cx, y:cy, r:small_radius, color:normal_color,
            normal_position: [cx, cy]});
        texts[name] = element.text({name: true, text: name, degrees: 0,
            x: cx, y: cy, color:normal_text, align:"center", valign:"center"});
        // cover the circle and the text with an invisible circle to receive events
        var invisible_circle = element.circle({name: name, x:cx, y:cy, r:small_radius, 
            color: "rgba(0,0,0,0)",         // invisible
            });
        // Bind an event to invisible circle
        invisible_circle.on("mouseover", do_transition);
    }
}

var selected_name = null;
var selected_position = null;

var do_transition = function (event) {
    var name = event.canvas_name;
    if ((name) && (name != selected_name)) {
        // transition the visible object under the event
        circles[name].transition({color:selected_color, r:big_radius, x:0, y:0}, duration);
        texts[name].transition({color:selected_text, x:0, y:0, degrees:720}, text_duration);
        // undo transition for previously selected objects
        if (selected_name) {
            circles[selected_name].transition(
                {color:normal_color, r:small_radius, x:selected_position[0], y:selected_position[1]}, 
                duration);
            texts[selected_name].transition(
                {color:normal_text, x:selected_position[0], y:selected_position[1], degrees:0},
                text_duration);
        }
    }
    selected_name = name;
    selected_position = [event.object_info.x, event.object_info.y];
};

// attach event handler
draw()

// Fit the figure into the available space
element.fit(null, 20);
</script>

<div id="code_text">
        <h3>Code</h3>
    
        <div><textarea id="code" name="code">
var element = $('#target_div');
// Attach a dual canvas associated with the element as a child of the element
// configured with width 400 and height 400.
var config = {
            width: 400,
            height: 400,
        };
element.dual_canvas_helper(config);


var small_radius = 10;
var big_radius = 20;
var offset = 50;
var selected_color = "magenta";
var normal_color = "cyan";
var selected_text = "yellow";
var normal_text = "blue";
var duration = 3;
var text_duration = 5;
var n_circles = 10;
var theta = 2 * Math.PI / n_circles;

var texts = {};
var circles = {};

// Draw a circle of numbered circles
var draw = function() {
    for (var i=0; i<n_circles; i++) {
        var name = ""+i;
        var cx = offset * Math.cos(theta * i);
        var cy = offset * Math.sin(theta * i);
        circles[name] = element.circle({name: true, 
            x:cx, y:cy, r:small_radius, color:normal_color,
            normal_position: [cx, cy]});
        texts[name] = element.text({name: true, text: name, degrees: 0,
            x: cx, y: cy, color:normal_text, align:"center", valign:"center"});
        // cover the circle and the text with an invisible circle to receive events
        var invisible_circle = element.circle({name: name, x:cx, y:cy, r:small_radius, 
            color: "rgba(0,0,0,0)",         // invisible
            });
        // Bind an event to invisible circle
        invisible_circle.on("mouseover", do_transition);
    }
}

var selected_name = null;
var selected_position = null;

var do_transition = function (event) {
    var name = event.canvas_name;
    if ((name) && (name != selected_name)) {
        // transition the visible object under the event
        circles[name].transition({color:selected_color, r:big_radius, x:0, y:0}, duration);
        texts[name].transition({color:selected_text, x:0, y:0, degrees:720}, text_duration);
        // undo transition for previously selected objects
        if (selected_name) {
            circles[selected_name].transition(
                {color:normal_color, r:small_radius, x:selected_position[0], y:selected_position[1]}, 
                duration);
            texts[selected_name].transition(
                {color:normal_text, x:selected_position[0], y:selected_position[1], degrees:0},
                text_duration);
        }
    }
    selected_name = name;
    selected_position = [event.object_info.x, event.object_info.y];
};

// attach event handler
draw()

// Fit the figure into the available space
element.fit(null, 20);
        </textarea></div>
    
    </div>

<div id="discussion">
        <h3>Discussion</h3>
    
        <div>
            Mouse over the circles to see the circle and the text on the circle transition
in color and move to the center over a period of time.
        </div>
    
    </div>
    
    <script>
            var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
              lineNumbers: true,
              matchBrackets: true,
              continueComments: "Enter",
              extraKeys: {"Ctrl-Q": "toggleComment"}
            });
     </script>
            
</body>
</html>